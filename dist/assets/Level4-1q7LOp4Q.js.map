{"version":3,"file":"Level4-1q7LOp4Q.js","sources":["../../src/tracks/levels/Level4.js"],"sourcesContent":["/**\r\n * Level 4 - Matrix\r\n * Digital realm with precise technical sections\r\n */\r\n\r\nexport default {\r\n  name: \"Matrix\",\r\n  description: \"Navigate through digital constructs with technical precision\", \r\n  difficulty: 4,\r\n  shader: \"matrix-rain\", // Digital theme for technical track\r\n  skybox: \"space-deep\", // Dark space for intense focus\r\n  \r\n  generateTrack(addSegment, addLoop) {\r\n    // Level 4: Desert Canyon - More challenging than Level 3\r\n    // --- Section 1: Starting straight ---\r\n    const startCount = 25;\r\n    for (let i = 0; i < startCount; i++) {\r\n      addSegment({\r\n        yawDelta: 0,\r\n        pitchDelta: 0,\r\n        rollDelta: 0,\r\n        isStartLine: (i === 0)\r\n      });\r\n    }\r\n    \r\n    // --- Section 2: Narrow Canyon Entry ---\r\n    // Simulate narrow canyon with tighter track width through sharper turns\r\n    const canyonEntry = [\r\n      { angle: Math.PI / 4, segments: 10, bank: Math.PI / 16 },   // 45° right\r\n      { angle: -Math.PI / 3, segments: 12, bank: -Math.PI / 16 }, // 60° left\r\n      { angle: Math.PI / 5, segments: 8, bank: Math.PI / 16 }     // 36° right\r\n    ];\r\n    \r\n    for (const turn of canyonEntry) {\r\n      const yawPerSegment = turn.angle / turn.segments;\r\n      const bankPerSegment = turn.bank / turn.segments;\r\n      \r\n      // Banking entry\r\n      for (let i = 0; i < 2; i++) {\r\n        addSegment({ \r\n          yawDelta: 0,\r\n          pitchDelta: 0,\r\n          rollDelta: bankPerSegment\r\n        });\r\n      }\r\n      \r\n      // Sharp turn with banking\r\n      for (let i = 0; i < turn.segments; i++) {\r\n        addSegment({ \r\n          yawDelta: yawPerSegment,\r\n          pitchDelta: 0,\r\n          rollDelta: 0\r\n        });\r\n      }\r\n      \r\n      // Banking exit\r\n      for (let i = 0; i < 2; i++) {\r\n        addSegment({ \r\n          yawDelta: 0,\r\n          pitchDelta: 0,\r\n          rollDelta: -bankPerSegment\r\n        });\r\n      }\r\n      \r\n      // Very short recovery\r\n      for (let i = 0; i < 3; i++) {\r\n        addSegment({ yawDelta: 0, pitchDelta: 0, rollDelta: 0 });\r\n      }\r\n    }\r\n    \r\n    // --- Section 3: Banked S-Curves ---\r\n    const sCurves = [\r\n      { angle: Math.PI / 2.5, segments: 15, bank: Math.PI / 8 },   // 72° right with steeper banking\r\n      { angle: -Math.PI / 2.2, segments: 16, bank: -Math.PI / 8 }, // 82° left with steeper banking\r\n      { angle: Math.PI / 3, segments: 12, bank: Math.PI / 10 }     // 60° right\r\n    ];\r\n    \r\n    for (const curve of sCurves) {\r\n      const yawPerSegment = curve.angle / curve.segments;\r\n      const bankPerSegment = curve.bank / curve.segments;\r\n      \r\n      // Progressive banking entry\r\n      for (let i = 0; i < 4; i++) {\r\n        addSegment({ \r\n          yawDelta: 0,\r\n          pitchDelta: 0,\r\n          rollDelta: bankPerSegment\r\n        });\r\n      }\r\n      \r\n      // Banked curve\r\n      for (let i = 0; i < curve.segments; i++) {\r\n        addSegment({ \r\n          yawDelta: yawPerSegment,\r\n          pitchDelta: 0,\r\n          rollDelta: 0\r\n        });\r\n      }\r\n      \r\n      // Progressive banking exit\r\n      for (let i = 0; i < 4; i++) {\r\n        addSegment({ \r\n          yawDelta: 0,\r\n          pitchDelta: 0,\r\n          rollDelta: -bankPerSegment\r\n        });\r\n      }\r\n      \r\n      // Minimal straight between curves\r\n      for (let i = 0; i < 2; i++) {\r\n        addSegment({ yawDelta: 0, pitchDelta: 0, rollDelta: 0 });\r\n      }\r\n    }\r\n    \r\n    // --- Section 4: Moderate Jumps with Shorter Gaps ---\r\n    const jumpSequence = [\r\n      { ramp: 7, gap: 2, land: 7 },    // Shorter gap, quicker timing\r\n      { straight: 5 },\r\n      { ramp: 8, gap: 3, land: 8 },\r\n      { straight: 4 },\r\n      { ramp: 6, gap: 2, land: 6 }     // Final quick jump\r\n    ];\r\n    \r\n    for (const section of jumpSequence) {\r\n      if (section.ramp) {\r\n        // Steeper ramp angle for more challenging jumps\r\n        const jumpAngle = Math.PI / 5.5; // ~33 degrees\r\n        \r\n        // Ramp up\r\n        for (let i = 0; i < section.ramp; i++) {\r\n          addSegment({ pitchDelta: jumpAngle / section.ramp });\r\n        }\r\n        // Gap\r\n        for (let i = 0; i < section.gap; i++) {\r\n          addSegment({ isGap: true });\r\n        }\r\n        // Landing\r\n        for (let i = 0; i < section.land; i++) {\r\n          addSegment({ pitchDelta: -jumpAngle / section.land });\r\n        }\r\n      } else if (section.straight) {\r\n        for (let i = 0; i < section.straight; i++) {\r\n          addSegment({ yawDelta: 0, pitchDelta: 0, rollDelta: 0 });\r\n        }\r\n      }\r\n    }\r\n    \r\n    // --- Section 5: Technical Chicane ---\r\n    // More complex chicane than Level 3\r\n    const technicalChicane = [\r\n      { yaw: Math.PI / 5, segments: 5 },    // 36° right (quick)\r\n      { yaw: -Math.PI / 2.5, segments: 9 }, // 72° left (sharp)\r\n      { yaw: Math.PI / 2.2, segments: 10 }, // 82° right (sharper)\r\n      { yaw: -Math.PI / 4, segments: 7 },   // 45° left\r\n      { yaw: Math.PI / 6, segments: 5 }     // 30° right to straighten\r\n    ];\r\n    \r\n    for (const turn of technicalChicane) {\r\n      const yawPerSegment = turn.yaw / turn.segments;\r\n      \r\n      for (let i = 0; i < turn.segments; i++) {\r\n        addSegment({ \r\n          yawDelta: yawPerSegment,\r\n          pitchDelta: 0,\r\n          rollDelta: 0\r\n        });\r\n      }\r\n      \r\n      // Very short pause between turns (makes it more technical)\r\n      addSegment({ yawDelta: 0, pitchDelta: 0, rollDelta: 0 });\r\n    }\r\n    \r\n    // --- Section 6: Challenging Split Path ---\r\n    // One side has more obstacles than the other\r\n    const splitLength = 30;\r\n    \r\n    for (let i = 0; i < splitLength; i++) {\r\n      let lanes;\r\n      \r\n      if (i < 6) {\r\n        // Gradual split\r\n        const splitFactor = i / 6;\r\n        lanes = [\r\n          { offset: -8.0 * splitFactor, width: 4.5 },  // Slightly narrower lanes\r\n          { offset: 8.0 * splitFactor, width: 4.5 }\r\n        ];\r\n      } else if (i < 24) {\r\n        // Full split with obstacles on left path\r\n        if (i >= 10 && i <= 12) {\r\n          // Left path has small jumps\r\n          lanes = [\r\n            { offset: -8.0, width: 4.5, obstacles: [{ type: 'jump', size: 'small' }] },\r\n            { offset: 8.0, width: 4.5 }  // Right path clear\r\n          ];\r\n        } else if (i >= 16 && i <= 18) {\r\n          // Left path has sharp turns\r\n          lanes = [\r\n            { offset: -8.0, width: 4.5, obstacles: [{ type: 'chicane' }] },\r\n            { offset: 8.0, width: 4.5 }  // Right path clear\r\n          ];\r\n        } else {\r\n          lanes = [\r\n            { offset: -8.0, width: 4.5 },\r\n            { offset: 8.0, width: 4.5 }\r\n          ];\r\n        }\r\n      } else {\r\n        // Merge back together\r\n        const mergeFactor = 1 - (i - 24) / 6;\r\n        lanes = [\r\n          { offset: -8.0 * mergeFactor, width: 4.5 },\r\n          { offset: 8.0 * mergeFactor, width: 4.5 }\r\n        ];\r\n      }\r\n      \r\n      addSegment({ lanes });\r\n    }\r\n    \r\n    // --- Section 7: Canyon Wall Simulator ---\r\n    // Tight winding section to simulate canyon walls\r\n    const canyonWalls = [\r\n      { angle: Math.PI / 3, segments: 8 },    // 60° right\r\n      { angle: -Math.PI / 4, segments: 6 },   // 45° left  \r\n      { angle: Math.PI / 5, segments: 7 },    // 36° right\r\n      { angle: -Math.PI / 3, segments: 9 },   // 60° left\r\n      { angle: Math.PI / 4, segments: 6 }     // 45° right\r\n    ];\r\n    \r\n    for (const section of canyonWalls) {\r\n      const yawPerSegment = section.angle / section.segments;\r\n      \r\n      for (let i = 0; i < section.segments; i++) {\r\n        addSegment({ \r\n          yawDelta: yawPerSegment,\r\n          pitchDelta: 0,\r\n          rollDelta: 0\r\n        });\r\n      }\r\n      \r\n      // Minimal recovery between turns\r\n      addSegment({ yawDelta: 0, pitchDelta: 0, rollDelta: 0 });\r\n    }\r\n    \r\n    // --- Section 8: Final Challenge Sequence ---\r\n    // Combination of banking and elevation changes\r\n    const finalChallenge = 20;\r\n    const elevationChange = Math.PI / 15; // Gentle elevation change\r\n    const bankingAngle = Math.PI / 12;    // Moderate banking\r\n    \r\n    for (let i = 0; i < finalChallenge; i++) {\r\n      let yawDelta = 0;\r\n      let pitchDelta = 0;\r\n      let rollDelta = 0;\r\n      \r\n      // Sinusoidal banking and gentle elevation\r\n      if (i < finalChallenge / 2) {\r\n        pitchDelta = elevationChange / (finalChallenge / 2);  // Gentle climb\r\n        rollDelta = Math.sin((i / finalChallenge) * Math.PI * 2) * bankingAngle / 5; // Gentle banking waves\r\n      } else {\r\n        pitchDelta = -elevationChange / (finalChallenge / 2); // Gentle descent\r\n        rollDelta = Math.sin((i / finalChallenge) * Math.PI * 2) * bankingAngle / 5;\r\n      }\r\n      \r\n      addSegment({ yawDelta, pitchDelta, rollDelta });\r\n    }\r\n    \r\n    // --- Section 9: Final Sprint to Finish ---\r\n    const finalSprint = 15;\r\n    for (let i = 0; i < finalSprint; i++) {\r\n      addSegment({ \r\n        yawDelta: 0,\r\n        pitchDelta: 0,\r\n        rollDelta: 0,\r\n        isFinishLine: (i === finalSprint - 1) \r\n      });\r\n    }\r\n  }\r\n};"],"names":["Level4","addSegment","addLoop","i","canyonEntry","turn","yawPerSegment","bankPerSegment","sCurves","curve","jumpSequence","section","jumpAngle","technicalChicane","splitLength","lanes","splitFactor","mergeFactor","canyonWalls","finalChallenge","elevationChange","bankingAngle","yawDelta","pitchDelta","rollDelta","finalSprint"],"mappings":"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"}